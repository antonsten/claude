---
import Layout from '../../layouts/Layout.astro';
import Hero from '../../components/Hero.astro';
import CalloutSection from '../../components/CalloutSection.astro';
import TestimonialGrid from '../../components/TestimonialGrid.astro';
import PricingCard from '../../components/ui/PricingCard.astro';
import BookSampleForm from '../../components/BookSampleForm.astro';
import { bookTestimonials } from '../../data/bookTestimonials';
---

<Layout
  title="Products People Actually Want | Anton Sten – UX Lead & Product Designer"
  description="A Designer's Guide to Building Better. We're drowning in products nobody wants, built by people who never asked if they should."
  path="/books/products-people-actually-want/"
  image="/images/ppaw-meta.webp"
>
  <div class="page-shell">
    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-copy">
          <p class="h3">
            We're drowning in products nobody wants, built by people who never asked if they should.
          </p>
          <p class="h3 mb-20">
            Every day, thousands of new apps, websites, and digital products launch. Most will be forgotten within six months—not because they don't work, but because nobody needed them in the first place.
          </p>
          <img
            src="/images/book/cover.webp"
            alt="Products People Actually Want book cover"
            class="book-cover mt-20"
          />
          <h1 class="h1 text-accent mb-4">Products People<br />Actually Want</h1>
          <h2 class="h2">A practical guide to building better products.</h2>
        </div>
      </div>
    </section>

    <section class="overview-section mt-20">
      <div class="overview-intro">
        <div class="body-copy">
          <p class="h3">
            This book covers everything from user research and stakeholder communication to design systems and team leadership.
          </p>
          <p class="h3">
            Learn how to focus on what users actually need, communicate design decisions effectively, and build products people genuinely want to use.
          </p>
                    <p class="h3">This isn't another book about making things pretty.
          <p class="h3 mb-20">
                It's about understanding humans well enough to build products people actually want.          </p>
          </p>
        </div>
      </div>

      <CalloutSection className="learning-callout" title="You'll learn" background="#FFFFFF">
        <div class="learning-columns">
          <ul class="body-lg learning-list">
            <li>Why "everyone is a designer" and how to leverage diverse perspectives in your team</li>
            <li>The complete product design process that works in the real world, not just in case studies</li>
            <li>How to communicate design decisions and influence stakeholders who "prefer the other option because it looks more modern"</li>
            <li>Practical frameworks for user research that reveal what people actually need (not what they say they want)</li>
            <li>How to design for anyone without falling into the "design for everyone" trap</li>
          </ul>
        </div>
      </CalloutSection>
    </section>

    <section class="toc-section">
      <CalloutSection background="#D1E8BD" className="toc-callout" title="Everything in the book">
        <h3 class="h4 mb-2">Part 1: Understanding product design</h3>
        <p class="body-lg">
          1. What product design actually means<br />
          2. Why everyone makes design decisions<br />
          3. Product design as a problem solver<br />
          4. Beyond the screen
        </p>

        <h3 class="h4 mt-8 mb-2">Part 2: Building your practice</h3>
        <p class="body-lg">
          5. The reality of product design work<br />
          6. Being the only designer<br />
          7. Leading without losing your craft<br />
          8. User research and stakeholder interviews<br />
          9. Creating a UX strategy
        </p>

        <h3 class="h4 mt-8 mb-2">Part 3: The craft</h3>
        <p class="body-lg">
          10. The product design process<br />
          11. Design principles<br />
          12. Creating meaningful design systems
        </p>

        <h3 class="h4 mt-8 mb-2">Part 4: Communication &amp; influence</h3>
        <p class="body-lg">
          13. Why designers need to write<br />
          14. Using writing to think through problems<br />
          15. How to sell design<br />
          16. Why designers need to speak business
        </p>

        <h3 class="h4 mt-8 mb-2">Part 5: Designing for humans</h3>
        <p class="body-lg">
          17. Building emotional relationships with users<br />
          18. Designing for anyone<br />
          19. Going beyond good enough
        </p>
      </CalloutSection>
    </section>

    <section class="testimonials-section">
      <TestimonialGrid testimonials={bookTestimonials} columns={3} maxWidth="default" />
    </section>

    <section class="pricing-section">
      <CalloutSection background="#00A35C" titleColor="#ffffff" contentColor="#ffffff" className="pricing-callout" title="Ready to build products people actually want?">
        <div class="pricing-intro">
          <p class="h3 mb-8">
            I'm not here to oversell you or make you second-guess with a dozen different options and add-ons.
          </p>
        </div>
        <div class="pricing-grid">
          <PricingCard
            title="E-book"
            price="$29"
            features={[
              "✓ PDF and ePub format",
              "✓ Instant download",
              "✓ Access to Slack community"
            ]}
            ctaText="Get e-book"
            ctaHref="https://antonsten.lemonsqueezy.com/buy/3fd0b9b0-239d-479d-a0bc-db13b45f143d?media=0&logo=0"
            ctaOnClick="trackBookPurchase('E-book', 29)"
            variant="white"
          />
          <PricingCard
            title="Buy on Amazon"
            price="$29"
            features={[
              "✓ Physical paperback",
               "✓ Kindle",
              "✓ Available on Amazon worldwide"
            ]}
            ctaText="Buy on Amazon"
            ctaHref="https://www.amazon.com/dp/B0FXMY87SY"
            ctaId="amazon-buy-link"
            ctaTarget="_blank"
            ctaRel="noopener noreferrer"
            ctaOnClick="trackBookPurchase('Physical Book - Amazon', 29)"
            variant="white"
          />
        </div>
      </CalloutSection>
    </section>

    <section class="sample-section" id="free-sample">
      <CalloutSection
        title="Download two free chapters"
        background="#D1E8BD"
        className="sample-callout"
      >
        <BookSampleForm
          description="No funky business, just chapters 1 and 2 delivered instantly."
          buttonText="Get free chapters"
          successMessage="Check your email for the download link!"
          variant="callout"
        />
      </CalloutSection>
    </section>

    <CalloutSection title="About me" background="#FFFFFF" className="author-callout">
      <div class="author-copy">
        <p class="h3">
          I've spent the past 25+ years designing and consulting for companies like IKEA, Herman Miller, Loom, Google, and Spotify. Right now, I'm Head of Design at Summer Health.
        </p>
        <p class="h3">
          Along the way, <a href="/articles" class="text-accent underline decoration-2 underline-offset-4 hover:opacity-80">my writing</a> has found its way into the design community, and I've had the chance to speak at conferences and design schools around the world.
        </p>
        <p class="h3">
          I'm based in Sweden, where I split my time between building products that matter, writing about design, and taking long walks with my wife and our dog, Taylor.
        </p>
      </div>
    </CalloutSection>
  </div>
</Layout>

<script>
  // Track book purchase events
  function trackBookPurchase(productName: string, price: number) {
    // Track in Fathom Analytics with value
    if (typeof (window as any).fathom !== 'undefined') {
      (window as any).fathom.trackEvent('Book Purchase Intent', {
        _value: price * 100 // Fathom expects value in cents
      });
    }
    
    // Console log for debugging
    console.log(`Book purchase tracking: ${productName} - $${price}`);
  }

  // Make function available globally
  (window as any).trackBookPurchase = trackBookPurchase;

  // Amazon geo-detection
  document.addEventListener('DOMContentLoaded', async () => {
    const amazonLink = document.getElementById('amazon-buy-link') as HTMLAnchorElement;
    if (!amazonLink) return;

    // Map country codes to Amazon stores
    const countryToAmazon: Record<string, string> = {
      'US': '.com',
      'CA': '.ca',
      'GB': '.co.uk',
      'UK': '.co.uk',
      'AU': '.com.au',
      'DE': '.de',
      'AT': '.de',
      'CH': '.de',
      'FR': '.fr',
      'BE': '.fr',
      'ES': '.es',
      'IT': '.it',
      'NL': '.nl',
      'SE': '.se',
      'PL': '.pl',
      'JP': '.co.jp',
      'BR': '.com.br',
      'AE': '.ae',
      'SA': '.ae',
      'IN': '.in',
      'MX': '.com.mx',
      'SG': '.sg',
      'TR': '.com.tr'
    };

    const asin = 'B0FXMY87SY';
    let domain = '.com'; // default

    try {
      // Use Cloudflare's trace endpoint (free, no API key needed)
      const response = await fetch('https://www.cloudflare.com/cdn-cgi/trace');
      const data = await response.text();

      // Parse the trace data
      const lines = data.split('\n');
      const locLine = lines.find(line => line.startsWith('loc='));

      if (locLine) {
        const countryCode = locLine.split('=')[1].toUpperCase();
        domain = countryToAmazon[countryCode] || '.com';
      }
    } catch (error) {
      // Fallback to timezone-based detection
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      if (timezone.includes('Stockholm') || timezone.includes('Europe/Stockholm')) {
        domain = '.se';
      } else if (timezone.includes('London') || timezone.includes('Europe/London')) {
        domain = '.co.uk';
      } else if (timezone.includes('Berlin') || timezone.includes('Europe/Berlin')) {
        domain = '.de';
      } else if (timezone.includes('Paris') || timezone.includes('Europe/Paris')) {
        domain = '.fr';
      }
    }

    // Update link with correct Amazon store
    amazonLink.href = `https://www.amazon${domain}/dp/${asin}`;
  });

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener('click', function (e: Event) {
      e.preventDefault();
      const href = (e.currentTarget as HTMLAnchorElement).getAttribute('href');
      const target = href ? document.querySelector(href) : null;
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

</script>

<style>
  .page-shell {
    max-width: 1080px;
    margin: 0 auto;
    padding: 0 20px 120px;
  }

  .hero-section {
    padding-top: 140px;
    padding-bottom: 96px;
  }

  @media (max-width: 768px) {
    .hero-section {
      padding-top: 120px;
      padding-bottom: 72px;
    }
  }

  .hero-content {
    display: grid;
    gap: 32px;
    max-width: 720px;
    margin: 0 auto;
    text-align: center;
  }

  .hero-copy {
    display: grid;
    gap: 24px;
  }

  .book-cover {
    width: 200px;
    height: auto;
    margin: 0 auto;
    border-radius: 4px;
  }

  .overview-section {
    display: grid;
    gap: 48px;
    margin-bottom: 96px;
  }

  .overview-intro {
    max-width: 600px;
    margin: 0 auto;
    display: grid;
    gap: 24px;
    text-align: center;
  }

  .body-copy {
    display: grid;
    gap: 24px;
    text-align: left;
  }

  .learning-callout :global(.callout__inner) {
    max-width: 960px;
  }

  .learning-columns {
    display: block;
  }

  .learning-list {
    list-style: disc;
    list-style-position: outside;
    padding-left: 24px;
    margin: 0;
    display: grid;
    gap: 16px;
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .learning-list {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      column-gap: 32px;
    }
  }

  .insight-callout {
    background: #bdd7e8;
    border-radius: 4px;
    padding: 32px;
    display: grid;
    gap: 16px;
    max-width: 720px;
    margin: 0 auto;
  }

  .toc-section {
    margin-bottom: 96px;
  }

  .toc-callout :global(.callout__inner) {
    max-width: 960px;
  }

  .toc-grid {
    display: grid;
    gap: 32px;
    grid-template-columns: 1fr;
  }

  .toc-column {
    display: grid;
    gap: 16px;
  }

  .toc-column ul {
    list-style: disc;
    padding-left: 20px;
    display: grid;
    gap: 12px;
    margin: 0;
  }

  @media (min-width: 768px) {
    .toc-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 40px;
    }
  }

  .testimonials-section {
    margin-bottom: 96px;
  }

  .pricing-section {
    margin-bottom: 96px;
  }

  .pricing-callout :global(.callout__inner) {
    max-width: 960px;
    margin-bottom: 0;
  }

  .pricing-callout :global(.callout__content) {
    display: grid;
    gap: 32px;
  }

  .pricing-intro {
    margin: 0;
  }

  .pricing-grid {
    display: grid;
    gap: 24px;
  }

  @media (min-width: 768px) {
    .pricing-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  .sample-section {
    margin-bottom: 96px;
  }

  .author-section {
    margin-bottom: 0;
  }

  .author-intro {
    max-width: 600px;
    margin: 0 auto;
    display: grid;
    gap: 24px;
  }

  .author-copy {
    display: grid;
    gap: 24px;
    text-align: left;
  }

  .author-image {
    width: 100%;
    max-width: 600px;
    height: auto;
    margin: 48px auto 0;
    border-radius: 4px;
  }

  .sample-callout :global(.callout__inner) {
    max-width: 960px;
  }

  .sample-callout :global(.book-sample--callout) {
    width: 100%;
  }

  .sample-callout :global(.book-sample__form) {
    width: 100%;
  }
</style>