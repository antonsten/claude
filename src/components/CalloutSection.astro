---
export interface Props {
  title?: string;
  titleTag?: 'h2' | 'h3' | 'p';
  background?: string;
  titleColor?: string;
  contentColor?: string;
  className?: string;
}

const {
  title = '',
  titleTag = 'h2',
  background,
  titleColor,
  contentColor,
  className = ''
} = Astro.props as Props;

const TitleTag = titleTag;
const hasTitleSlot = Astro.slots.has('title');
const hasTitle = title || hasTitleSlot;

const styleVars = [
  `--callout-bg:${background}`,
  titleColor ? `--callout-title:${titleColor}` : '',
  contentColor ? `--callout-content:${contentColor}` : ''
]
  .filter(Boolean)
  .join(';');
---

<section class={`callout ${className}`} style={styleVars}>
  <div class={`callout__inner ${!hasTitle ? 'callout__inner--no-title' : ''}`}>
    <div class="callout__title">
      {hasTitleSlot ? (
        <slot name="title" />
      ) : (
        title && <TitleTag class="callout__heading">{title}</TitleTag>
      )}
    </div>
    <div class="callout__content">
      <slot />
    </div>
  </div>
</section>

<style>
  .callout__inner {
    max-width: 960px;
    margin: 0 auto;
    background: var(--callout-bg, rgb(var(--color-surface)));
    border-radius: 4px;
    padding: 48px;
    display: grid;
    gap: 24px;
    grid-template-columns: minmax(0, 1fr) minmax(0, 2fr);
    align-items: start;
  }

  .callout__title {
    color: var(--callout-title, rgb(var(--color-text)));
  }

  .callout__heading {
    margin: 0;
    font-size: 2rem;
    line-height: 1.2;
    letter-spacing: -0.015em;
  }

  .callout__content {
    color: var(--callout-content, rgb(var(--color-text)));
  }

  .callout__inner--no-title {
    grid-template-columns: 1fr;
  }

  .callout__inner--no-title .callout__title {
    display: none;
  }

  @media (max-width: 900px) {
    .callout__inner {
      grid-template-columns: 1fr;
      padding: 32px 24px;
      gap: 32px;
    }

    .callout__heading {
      font-size: 1.75rem;
    }
  }
</style>
