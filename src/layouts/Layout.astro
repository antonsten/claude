---
import '../styles/critical.css';
import '../styles/global.css';
import HtmlHead from '../components/HtmlHead.astro';
import ScrollAnimation from '../components/ScrollAnimation.astro';
import Footer from '../components/Footer.astro';
import CanonicalUrl from '../components/CanonicalUrl.astro';
import PersonSchema from '../components/PersonSchema.astro';
import ThemeScript from '../components/ThemeScript.astro';

export interface Props {
        title: string;
        description?: string;
        path?: string;
        image?: string;
}

const {
        title,
        description = "Anton Sten is a UX lead and product designer helping teams build better digital products through thoughtful design, collaboration, and strategy.",
        path = '',
        image = '/images/og-image.png'
} = Astro.props;

// Get the success state from the URL
const success = Astro.url.searchParams.get('success') === 'true';

// Inline critical CSS
const criticalCSS = await Astro.slots.render('critical-css');
---

<!doctype html>
<html lang="en">
	<head>
  <ThemeScript />
  <HtmlHead title={title} description={description} image={image} />
  <CanonicalUrl path={Astro.url.pathname} />
  <style is:inline>{criticalCSS}</style>
		<link rel="stylesheet" href="/styles/global.css" media="print" onload="this.media='all'" />
		<noscript><link rel="stylesheet" href="/styles/global.css" /></noscript>
	</head>
	<body class="bg-white dark:bg-dark-bg text-black dark:text-dark-text antialiased transition-colors duration-200">
		<ScrollAnimation path={path}>
			<main class="min-h-screen">
				<slot />
			</main>
			<Footer />
		</ScrollAnimation>
		<PersonSchema />
	</body>
</html>

<style is:global>
	/* Add any global styles here */
	html {
		font-family: 'Suisse Intl', system-ui, sans-serif;
	}
</style>
